# 标准翻译：思路及实现

## 1、现状分析

在创建关系型数据库中各个业务表的过程中，对于一些枚举类的属性往往不是存储其原始值，而是先对其进行编码再进行存储，这样可以有效提升数据存储及利用的效率。

一般来说，对于这些编码值与其所代表的原始值之间的映射关系，应该在单独的表（字典表）中进行存储，以便于在数据利用时能给及时还原其业务含义。但在实际工作中，由于各种原因导致来字典表的建设与更新不及时，从而充分发挥数据的价值带来了不良的影响。

因此，如何通过现有的数据及收集到的各种相关信息，来还原出业务表中各个编码对应的真实含义，具有十分重要的研究意义。进一步，在明确了各种编码规则的基础上，实现跨业务系统之间编码的互译与转换，可以为不同专业的工作人员提供更加便利的数据利用条件。

## 2、工作目标

本项工作拟实现的目标是：

- 实现编码值向业务含义的转换；
- 实现跨系统的编码值的翻译。

其中，第一项工作是第二项工作的基础。

## 3、实现思路

通过对现有数据的分析与整理，我们发现记录数据编码信息的方式主要有两种：一是在表及字段的注释文本中，存在描述各个编码值的业务含义的内容；二是存在单独的一张表，记录了该数据库中部分表中的编码规则。

基于以上事实和第2部分的工作目标，初步确定了以下实现思路：

### 3.1 编码值到业务含义的转换

要实现编码值到其业务含义的转换，核心目标是生成一组映射规则，该规则中详细记录了某系统中某张表的某个字段的所有可能取值及其对应的真实含义。通过这种映射规则，就可以对用户输入的待转换的数据进行翻译，从而获得各个编码值所表示的真实的业务含义。

要实现这样的映射规则，根据编码信息的来源不同，有以下两种实现方式：

- 对于存在注释中的编码解释信息，利用正则表达式的方式进行提取，结构化之后存储到规则库中（已实现）；
- 对于存在单独的字典表中的编码解释信息，需要首先识别出该类表，然后将字典表中的解释信息对应到其他表中，并抽取映射规则，然后结构化存储（已有思路，但计算量太大，无法满足要求）。

### 3.2 跨系统编码值的翻译

跨系统编码值的翻译是在单系统编码值到业务含义值转换的基础上进行的。首先实现各个系统中的编码值到其业务含义的转换，然后把真实业务含义作为"桥梁"，实现两个系统的编码值的互译。